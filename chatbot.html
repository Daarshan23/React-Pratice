<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat-Bot</title>
    <style>
    
    </style>
</head>

<body>
    <div class="js-main"></div>

    <script src="https://unpkg.com/supersimpledev/react.js"></script>
    <script src="https://unpkg.com/supersimpledev/chatbot.js"></script>
    <script src="https://unpkg.com/supersimpledev/react-dom.js"></script>
    <script src="https://unpkg.com/supersimpledev/babel.js"></script>
    <script type="text/babel">    
        function ChatInput({ chatMessages, setChatMessages }) {
            const [inputText, setInputText] = React.useState("");
            function saveInputText(event) {
                setInputText(event.target.value);
            }
            function sendMessage() {
                const newChatMessages = [
                    ...chatMessages,
                    {
                        message: inputText,
                        sender: "user",
                        id: crypto.randomUUID(),
                    },
                ];
                setChatMessages(newChatMessages);

                const response = Chatbot.getResponse(inputText);
                //console.log(response);
                setChatMessages([
                    ...newChatMessages,
                    {
                        message: response,
                        sender: "robot",
                        id: crypto.randomUUID(),
                    },
                ]);
                setInputText("");
            }
            return (
                <div className='flex'>
                    <input
                        placeholder="Send a msg to chatbot"
                        size="30"
                        onChange={saveInputText}
                        value={inputText}
                        className='input'
                    />
                    <button onClick={sendMessage} className='send'>Send</button>
                </div>
            );
        }

        function ChatMessage({ message, sender }) {
            //        const message = props.message;
            //      const sender = props.sender;
            //const {message , sender} = props;

            /*if(sender === 'robot')
                {
                    return (
                        <div>
                            <img src="robot.png" width = "50" />
                            {message}
                        </div>
                    );
                }*/
            return (
                <div className={
                    sender === 'user'
                        ? 'chat-msg-user'
                        : 'chat-msg-robot'}>
                    {sender === "robot" && (
                        <img src="robot.png"
                            className="rpro" />
                    )}
                    <div className='chat-msg'>
                        {message}
                    </div>
                    {sender === "user" && (
                        <img src="user.png"
                            className='rpro'
                        />
                    )}
                </div>
            );
        }
        function ChatMessages({ chatMessages }) {
        const chatMsgRef =React.useRef(null);
            React.useEffect(() => {
                const conElement = chatMsgRef.current;
                if(conElement){
                    conElement.scrollTop = conElement.scrollHeight;
                }
            }, [chatMessages]);
            return (
                <div
                    className='chat-msgg-cont'
                    ref={chatMsgRef}>
                    {chatMessages.map((chatMessage) => {
                        return (
                            <ChatMessage
                                message={chatMessage.message}
                                sender={chatMessage.sender}
                                key={chatMessage.id}
                            />
                        );
                    })}
                </div>
            );
        }
        function App() {
            const [chatMessages, setChatMessages] = React.useState([
                {
                    message: "hello chatbot ",
                    sender: "user",
                    id: "id1",
                },
                {
                    message: "hello Hello how can i help you ",
                    sender: "robot",
                    id: "id2",
                },
                {
                    message: "Can you get me today date chatbot ",
                    sender: "user",
                    id: "id3",
                },
                {
                    message: "03-feb-2026  ",
                    sender: "robot",
                    id: "id4",
                },
            ]);
            //const [chatMessages , setChatMessages] = array;
            // const chatMessages = array[0];
            // const setChtMessages =  array[1];
            return (
                <div className="app">
                    <ChatMessages chatMessages={chatMessages} />
                    <ChatInput
                        chatMessages={chatMessages}
                        setChatMessages={setChatMessages}
                    />
                </div>
            );
        }
        const container = document.querySelector(".js-main");
        ReactDOM.createRoot(container).render(<App />);
    </script>
</body>

</html>